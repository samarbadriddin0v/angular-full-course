<div class="container-sm">
  <div>
    @if(cart().length === 0){
    <mat-card class="empty-cart">
      <mat-card-content class="center-content">
        <div class="empty-content">
          <mat-icon class="empty-icon">shopping_cart</mat-icon>
        </div>
        <h2>Your cart is empty</h2>
        <p>Browse products and add items to your cart.</p>
        <button mat-raised-button color="primary" routerLink="/products">
          Shop now
        </button>
      </mat-card-content>
    </mat-card>
    }
  </div>

  @for (item of cart(); track item.id) {
  <mat-card appearance="outlined" class="mb-2">
    <mat-card-header>
      <mat-card-title>{{item.product.title}}</mat-card-title>
      <mat-card-subtitle>{{item.product.price | currency}}</mat-card-subtitle>
    </mat-card-header>

    <mat-card-content class="mt-2">
      <div class="quantity-controls">
        <button
          mat-mini-fab
          color="primary"
          aria-label="Add"
          (click)="decrease(item.id, item.quantity)"
        >
          <mat-icon>remove</mat-icon>
        </button>

        <span class="mx-2">{{item.quantity}}</span>

        <button
          mat-mini-fab
          color="primary"
          aria-label="Add"
          (click)="increase(item.id, item.quantity)"
        >
          <mat-icon>add</mat-icon>
        </button>
      </div>
    </mat-card-content>

    <mat-card-actions>
      <button
        mat-button
        color="warn"
        aria-label="Remove"
        (click)="remove(item.id)"
      >
        <mat-icon>delete</mat-icon>
        Remove
      </button>
    </mat-card-actions>
  </mat-card>
  }

  <div>
    @if(cart().length) {
    <mat-card class="total-card">
      <mat-card-title>Total: {{totalPrice() | currency}} </mat-card-title>
      <div class="mt-2">
        <button
          mat-button
          matButton="filled"
          aria-label="Remove"
          (click)="clear()"
        >
          Clear Cart
          <mat-icon>clear</mat-icon>
        </button>
      </div>
    </mat-card>
    }
  </div>
</div>
